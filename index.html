<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kinyawa Hub ‚Äî Uniting Our Community, Culture & Commerce</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
  <style>
    /* Pulsing glow for Clear Filters */
    @keyframes neonPulse {
      0%, 100% {
        box-shadow: 0 0 5px #16a34a, 0 0 10px #16a34a, 0 0 20px #16a34a;
      }
      50% {
        box-shadow: 0 0 15px #16a34a, 0 0 30px #16a34a, 0 0 45px #16a34a;
      }
    }
    .glow-active {
      animation: neonPulse 2s infinite;
    }
    .hover-glow:hover {
      box-shadow: 0 0 12px #16a34a, 0 0 20px #16a34a;
      transition: box-shadow 0.3s ease-in-out;
    }

    /* Neon hover glow for business cards */
    .business-card {
      transition: box-shadow 0.3s ease-in-out, transform 0.3s ease-in-out;
    }
    .business-card:hover {
      box-shadow: 0 0 10px #16a34a, 0 0 20px #16a34a, 0 0 30px #16a34a;
      transform: translateY(-2px);
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-800">

  <!-- Hero Section -->
  <section class="relative h-[50vh] flex items-center justify-center text-center bg-cover bg-center" style="background-image: url('kinyawa.png');">
    <div class="absolute inset-0 bg-black bg-opacity-50"></div>
    <div class="relative z-10 text-white" data-aos="fade-up">
      <h1 class="text-4xl md:text-5xl font-extrabold tracking-wide mb-2">KINYAWA NANYORR</h1>
      <p class="text-lg md:text-xl font-light">Uniting Our Community Through Events & Local Business</p>
    </div>
  </section>

  <!-- Main Content -->
  <main class="max-w-5xl mx-auto p-6">
    <!-- Upcoming Events -->
    <h2 class="text-2xl font-bold mb-4">Upcoming Events</h2>
    <!-- Event Filters -->
    <div class="flex flex-col md:flex-row md:items-center md:space-x-3 space-y-3 md:space-y-0 mb-4">
      <input type="text" id="searchInput" placeholder="Search by event name or location" class="w-full md:w-1/2 p-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-400" />
      <select id="monthFilter" class="w-full md:w-1/3 p-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-400">
        <option value="">Filter by Month</option>
        <option value="0">January</option>
        <option value="1">February</option>
        <option value="2">March</option>
        <option value="3">April</option>
        <option value="4">May</option>
        <option value="5">June</option>
        <option value="6">July</option>
        <option value="7">August</option>
        <option value="8">September</option>
        <option value="9">October</option>
        <option value="10">November</option>
        <option value="11">December</option>
      </select>
      <button id="clearFilters" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm transition hover-glow">Clear Filters</button>
    </div>

    <div id="eventList" class="grid md:grid-cols-2 lg:grid-cols-3 gap-4"></div>

    <form id="eventForm" class="mt-6 space-y-3">
      <input type="text" id="eventName" placeholder="Event Name" class="w-full p-2 border rounded" required />
      <input type="date" id="eventDate" class="w-full p-2 border rounded" required />
      <input type="text" id="eventLocation" placeholder="Location" class="w-full p-2 border rounded" />
      <textarea id="eventDescription" placeholder="Description" class="w-full p-2 border rounded"></textarea>
      <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded">Add Event</button>
    </form>

    <!-- Local Businesses -->
    <h2 class="text-2xl font-bold mt-10 mb-4">Local Businesses</h2>
    <!-- Business Filters -->
    <div class="flex flex-col md:flex-row md:items-center md:space-x-3 space-y-3 md:space-y-0 mb-4">
      <input type="text" id="businessSearch" placeholder="Search by name, type or location" class="w-full md:w-1/2 p-2 border rounded focus:outline-none focus:ring-2 focus:ring-yellow-400" />
      <select id="businessSort" class="w-full md:w-1/3 p-2 border rounded focus:outline-none focus:ring-2 focus:ring-yellow-400">
        <option value="">Sort by Type</option>
        <option value="salon">Salon</option>
        <option value="shop">Shop</option>
        <option value="eatery">Eatery</option>
        <option value="transport">Transport</option>
        <option value="other">Other</option>
      </select>
    </div>

    <div id="businessList" class="grid gap-4"></div>

    <form id="businessForm" class="mt-6 space-y-3">
      <input type="text" id="businessName" placeholder="Business Name" class="w-full p-2 border rounded" required />
      <input type="text" id="businessType" placeholder="Business Type (e.g., salon, shop)" class="w-full p-2 border rounded" />
      <input type="text" id="businessLocation" placeholder="Location" class="w-full p-2 border rounded" />
      <input type="text" id="businessContact" placeholder="Contact Info" class="w-full p-2 border rounded" />
      <input type="text" id="businessEmail" placeholder="Email (optional)" class="w-full p-2 border rounded" />
      <textarea id="businessDescription" placeholder="Short Description" class="w-full p-2 border rounded"></textarea>
      <button type="submit" class="bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded">Add Business</button>
    </form>
  </main>

  <!-- Footer -->
  <footer class="bg-gray-900 text-gray-200 mt-10 py-6 text-center">
    <p class="text-sm">Proudly created by <span class="font-semibold">Seltec Technologies</span></p>
    <p class="text-sm">üìû 0742147197 | ‚úâÔ∏è davidkop18@gmail.com</p>
    <a href="https://kopirato.github.io/Seltec/" class="text-green-400 hover:text-green-500 text-sm" target="_blank">https://kopirato.github.io/Seltec/</a>
  </footer>

  <script>
    AOS.init();

    const allowedNumbers = ["0724484459", "0742147197"];
    function authorize(action, callback) {
      const phone = prompt(`üîí ${action}\nPlease enter your phone number to confirm:`);
      if (allowedNumbers.includes(phone?.trim())) {
        callback(true);
      } else {
        alert("üö´ Access denied! You are not authorized to perform this action.");
        callback(false);
      }
    }

    /* -------------------- EVENTS -------------------- */
    const eventForm = document.getElementById('eventForm');
    const eventList = document.getElementById('eventList');
    const searchInput = document.getElementById('searchInput');
    const monthFilter = document.getElementById('monthFilter');
    const clearFilters = document.getElementById('clearFilters');
    let events = JSON.parse(localStorage.getItem('events')) || [];

    function displayEvents() {
      eventList.innerHTML = '';
      let filtered = [...events];

      const searchTerm = searchInput.value.toLowerCase();
      if (searchTerm) {
        filtered = filtered.filter(e =>
          e.name.toLowerCase().includes(searchTerm) ||
          e.location.toLowerCase().includes(searchTerm)
        );
      }

      const selectedMonth = monthFilter.value;
      if (selectedMonth !== '') {
        filtered = filtered.filter(e => new Date(e.date).getMonth() == selectedMonth);
      }

      filtered.sort((a, b) => new Date(a.date) - new Date(b.date));

      filtered.forEach((e, index) => {
        const div = document.createElement('div');
        div.className = 'p-5 bg-gradient-to-br from-green-50 to-white rounded-2xl shadow hover:shadow-lg transform hover:-translate-y-1 transition duration-300';
        div.innerHTML = `
          <div class='mb-3'>
            <h3 class='text-xl font-semibold text-green-700 mb-1'>${e.name}</h3>
            <p class='text-sm text-gray-600'><strong>Date:</strong> ${e.date}</p>
            <p class='text-sm text-gray-600'><strong>Location:</strong> ${e.location}</p>
          </div>
          <p class='text-gray-700 mb-3'>${e.description}</p>
          <div class='flex justify-end'>
            <button onclick='attemptDeleteEvent(${index})' class='bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm transition'>Delete</button>
          </div>
        `;
        eventList.appendChild(div);
      });
      toggleGlow();
    }

    function toggleGlow() {
      if (searchInput.value || monthFilter.value) {
        clearFilters.classList.add('glow-active');
      } else {
        clearFilters.classList.remove('glow-active');
      }
    }

    clearFilters.addEventListener('click', () => {
      searchInput.value = '';
      monthFilter.value = '';
      displayEvents();
    });

    function attemptDeleteEvent(index) {
      authorize("Delete Event", (granted) => {
        if (granted) {
          events.splice(index, 1);
          localStorage.setItem('events', JSON.stringify(events));
          displayEvents();
        }
      });
    }

    eventForm.addEventListener('submit', e => {
      e.preventDefault();
      authorize("Add Event", (granted) => {
        if (!granted) return;
        const newEvent = {
          name: eventForm.eventName.value,
          date: eventForm.eventDate.value,
          location: eventForm.eventLocation.value,
          description: eventForm.eventDescription.value
        };
        events.push(newEvent);
        localStorage.setItem('events', JSON.stringify(events));
        eventForm.reset();
        displayEvents();
      });
    });

    searchInput.addEventListener('input', displayEvents);
    monthFilter.addEventListener('change', displayEvents);
    displayEvents();

    /* -------------------- BUSINESSES -------------------- */
    const businessForm = document.getElementById('businessForm');
    const businessList = document.getElementById('businessList');
    const businessSearch = document.getElementById('businessSearch');
    const businessSort = document.getElementById('businessSort');
    let businesses = JSON.parse(localStorage.getItem('businesses')) || [];

    function displayBusinesses() {
      businessList.innerHTML = '';
      let filtered = [...businesses];

      const searchTerm = businessSearch.value.toLowerCase();
      if (searchTerm) {
        filtered = filtered.filter(b =>
          b.name.toLowerCase().includes(searchTerm) ||
          b.type.toLowerCase().includes(searchTerm) ||
          b.location.toLowerCase().includes(searchTerm)
